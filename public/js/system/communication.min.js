$(function() { var que = {}; var debug = ($('#env').val() == 'production' ? false : true);

    function log() { if (!debug) return; if (console && console.log) console.log(arguments); }

    function notify(e, p) { p = p || null; if (!que.hasOwnProperty(e)) return log(e, 'nothing listening');
        $.each(que[e], function(i, o) { var v = o(p) || null;
            log(e, 'with', p, '=> ' + v); }); return true; }

    function observe(e, obj) { if (typeof e == 'object') { $.each(e, function(i, ev) { observe(ev, obj); }); } else if (typeof e == 'string') { if (!que.hasOwnProperty(e)) que[e] = [];
            que[e].push(obj); } else { log('Que Reject', e); } }
    window.notify = notify;
    window.observe = observe;
    window.debug = debug; if (debug) window.que = que; });